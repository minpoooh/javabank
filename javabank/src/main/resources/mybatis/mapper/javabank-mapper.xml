<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
<mapper namespace="mybatis.javabank.javabank-mapper">

	<select id="findUsernameById" parameterType="String" resultType="UserDTO">
		select * from JB_USER
		where userId = #{insertedUserId}
	</select>
    
    <insert id="joinUser" parameterType="java.util.Map">
    	insert into javabankUser (userId, userPw, userName, userBirth, userEmail, userTel, userRoles, userRegDate)
    	values (#{userId}, #{userPw}, #{userName}, #{userBirth}, #{userEmail}, #{userTel}, 'USER', SYSDATE)
    </insert>
    
    <select id="checkID" parameterType="String" resultType="int">
    	select count(*) from JB_USER
    	where userId = #{userId}
    </select>
    
    <select id="getUserName" parameterType="String" resultType="String">
    	select userName from JB_USER
    	where userId = #{userId}
    </select>
    
    <select id="getAccountList" parameterType="String" resultType="DepositDTO">
    	select A.*, B.balance from JB_DEPOSIT A
    						  join JB_Dtransaction B
    								on A.depositAccount = B.depositAccount
    	where userId = #{userId}
    </select>
    
</mapper>